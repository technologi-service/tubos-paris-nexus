---
 import "../styles/global.css";
---

<section class="min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-100 to-green-100">
  <div class="w-full max-w-md bg-white rounded-2xl shadow-xl p-8">
    <h2 class="text-3xl font-extrabold text-center text-blue-700 mb-6">Tubos Paris</h2>

    <form id="loginForm" class="space-y-6" novalidate>
      <div class="flex flex-col gap-2">
        <label for="usuario" class="text-lg font-semibold text-gray-700">Email</label>
        <input
          id="usuario"
          type="email"
          name="usuario"
          class="border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400"
          placeholder="tubosparis@correo.com"
          required
        />
      </div>

      <div class="flex flex-col gap-2">
        <label for="password" class="text-lg font-semibold text-gray-700">Contraseña</label>
        <input
          id="password"
          type="password"
          name="password"
          class="border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-green-400"
          placeholder="Contraseña"
          required
        />
      </div>

      <button
        type="submit"
        class="w-full py-3 rounded-lg bg-gradient-to-r from-green-400 to-blue-500 text-white font-bold text-lg shadow hover:scale-105 transition-transform"
      >
        Acceder
      </button>

      <p
        id="errorMessage"
        class="text-red-700 text-center mt-4 hidden bg-red-100 border border-red-400 px-4 py-3 rounded relative"
        role="alert"
        aria-live="assertive"
      >
        <strong class="font-bold">Error:</strong>
        <span class="block sm:inline">Email o contraseña inválidos.</span>
      </p>
    </form>
  </div>
</section>

<script is:inline>
  document.addEventListener("DOMContentLoaded", () => {
    const DEFAULT_USER = "tubosparis@correo.com";
    const DEFAULT_PASSWORD = "tubosparis2025";

    const form = document.getElementById("loginForm");
    const usuarioInput = document.getElementById("usuario");
    const passwordInput = document.getElementById("password");
    const errorMessage = document.getElementById("errorMessage");

    function showError() {
      errorMessage.classList.remove("hidden");
      errorMessage.classList.add("block");
    }

    function hideError() {
      errorMessage.classList.add("hidden");
      errorMessage.classList.remove("block");
    }

    form.addEventListener("submit", (event) => {
      event.preventDefault();

      const usuario = usuarioInput.value.trim();
      const password = passwordInput.value.trim();

      if (usuario !== DEFAULT_USER || password !== DEFAULT_PASSWORD) {
        showError();
        return;
      }

      hideError();
      // ✅ Redirección al cumplir credenciales
      window.location.href = "/vistaClientes";
    });

    [usuarioInput, passwordInput].forEach((el) =>
      el.addEventListener("input", hideError)
    );
  });
</script>


---
import '../styles/global.css';





---
<div class="flex flex-col items-center justify-center p-8 bg-gray-50 rounded-xl shadow-md max-w-md mx-auto mt-8">
  <h3 class="mb-2 text-blue-600 text-xl font-semibold">Recalcular Métricas</h3>
  <p class="mb-5 text-gray-700">Haz clic en el botón para recalcular las métricas generales.</p>
  <button
    id="recalcularBtn"
    class="px-6 py-3 bg-gradient-to-r from-blue-600 to-cyan-400 text-white rounded-lg text-base font-medium shadow hover:from-blue-700 hover:to-cyan-500 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-400"
  >
    Recalcular Métricas
  </button>
<script>
import { navigate } from "astro:transitions/client";

  document.addEventListener('DOMContentLoaded', () => {
    const btn = document.getElementById('recalcularBtn');
    if (btn) {
      btn.addEventListener('click', async () => {
        try {
          const res = await fetch('https://kukulcanai.app.n8n.cloud/webhook/d0d91297-56a9-4669-8eb7-7278d9642cb3', {
            method: 'GET'
          });
          if (res.ok) {
            alert('Recalculo realizado correctamente');
          } else {
            alert('Error al recalcular');
          }
        } catch (e) {
          alert('Error de conexión');
          navigate('/visualResult')
        }
      });
    }
  });
</script>
